AI SDK 5 is available now.










Menu




































































































































































































































































































































































































































































































# [`useChat` "Failed to Parse Stream String" Error](#usechat-failed-to-parse-stream-string-error)

## [Issue](#issue)

I am using [`useChat`](../reference/ai-sdk-ui/use-chat.html) or [`useCompletion`](../reference/ai-sdk-ui/use-completion.html), and I am getting a `"Failed to parse stream string. Invalid code"` error. I am using version `3.0.20` or newer of the AI SDK.

## [Background](#background)

The AI SDK has switched to the stream data protocol in version `3.0.20`. [`useChat`](../reference/ai-sdk-ui/use-chat.html) and [`useCompletion`](../reference/ai-sdk-ui/use-completion.html) expect stream parts that support data, tool calls, etc. What you see is a failure to parse the stream. This can be caused by using an older version of the AI SDK in the backend, by providing a text stream using a custom provider, or by using a raw LangChain stream result.

## [Solution](#solution)

You can switch [`useChat`](../reference/ai-sdk-ui/use-chat.html) and [`useCompletion`](../reference/ai-sdk-ui/use-completion.html) to raw text stream processing with the [`streamProtocol`](../reference/ai-sdk-ui/use-completion.html#stream-protocol) parameter. Set it to `text` as follows:



``` tsx
const  = useChat();
```

















On this page






















Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.