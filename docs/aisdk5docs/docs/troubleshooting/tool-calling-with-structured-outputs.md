AI SDK 5 is available now.










Menu




































































































































































































































































































































































































































































































# [Tool calling with generateObject and streamObject (structured outputs)](#tool-calling-with-generateobject-and-streamobject-structured-outputs)

## [Issue](#issue)

You may want to combine tool calling with structured output generation. While `generateObject` and `streamObject` are designed specifically for structured outputs, they don't support tool calling.

## [Background](#background)

To use tool calling with structured outputs, use `generateText` or `streamText` with the `experimental_output` option.

**Important**: When using `experimental_output` with tool calling, the structured output generation counts as an additional step in the execution flow.

## [Solution](#solution)

When using `experimental_output` with tool calling, adjust your `stopWhen` condition to account for the additional step required for structured output generation:



``` tsx
const result = await generateText(),  }),  tools: ),      execute: async () => ;      }),    },  },  // Add at least 1 to your intended step count to account for structured output  stopWhen: stepCountIs(3), // Now accounts for: tool call + tool result + structured output  prompt: 'Analyze the data and provide a summary',});
```


For more information about using structured outputs with `generateText` and `streamText` see [Generating Structured Data](../ai-sdk-core/generating-structured-data.html#structured-outputs-with-generatetext-and-streamtext).
















On this page






















Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.