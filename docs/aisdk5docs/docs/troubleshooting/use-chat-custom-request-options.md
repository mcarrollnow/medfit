AI SDK 5 is available now.










Menu




































































































































































































































































































































































































































































































# [Custom headers, body, and credentials not working with useChat](#custom-headers-body-and-credentials-not-working-with-usechat)

## [Issue](#issue)

When using the `useChat` hook, custom request options like headers, body fields, and credentials configured directly on the hook are not being sent with the request:



``` tsx
// These options are not sent with the requestconst  = useChat(,  body: ,  credentials: 'include',});
```


## [Background](#background)

The `useChat` hook has changed its API for configuring request options. Direct options like `headers`, `body`, and `credentials` on the hook itself are no longer supported. Instead, you need to use the `transport` configuration with `DefaultChatTransport` or pass options at the request level.

## [Solution](#solution)

There are three ways to properly configure request options with `useChat`:

### [Option 1: Request-Level Configuration (Recommended for Dynamic Values)](#option-1-request-level-configuration-recommended-for-dynamic-values)

For dynamic values that change over time, the recommended approach is to pass options when calling `sendMessage`:



``` tsx
const  = useChat();
// Send options with each messagesendMessage(  ,  `, // Dynamic auth token      'X-Request-ID': generateRequestId(),    },    body: ,  },);
```


This approach ensures that the most up-to-date values are always sent with each request.

### [Option 2: Hook-Level Configuration with Static Values](#option-2-hook-level-configuration-with-static-values)

For static values that don't change during the component lifecycle, use the `DefaultChatTransport`:



``` tsx
import  from '@ai-sdk/react';import  from 'ai';
const  = useChat(,    body: ,    credentials: 'include', // Static credentials policy  }),});
```


### [Option 3: Hook-Level Configuration with Resolvable Functions](#option-3-hook-level-configuration-with-resolvable-functions)

If you need dynamic values at the hook level, you can use functions that return configuration values. However, request-level configuration is generally preferred for better reliability:



``` tsx
import  from '@ai-sdk/react';import  from 'ai';
const  = useChat(`,      'X-User-ID': getCurrentUserId(),    }),    body: () => (),    credentials: () => (isAuthenticated() ? 'include' : 'same-origin'),  }),});
```





For component state that changes over time, request-level configuration (Option 1) is recommended. If using hook-level functions, consider using `useRef` to store current values and reference `ref.current` in your configuration function.



### [Combining Hook and Request Level Options](#combining-hook-and-request-level-options)

Request-level options take precedence over hook-level options:



``` tsx
// Hook-level default configurationconst  = useChat(,    body: ,  }),});
// Override or add options per requestsendMessage(  ,  ,    body: ,  },);
```


For more details on request configuration, see the [Request Configuration](../ai-sdk-ui/chatbot.html#request-configuration) documentation.
















On this page




































Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.