AI SDK 5 is available now.










Menu






















































































































































































































































































































































# [Message Metadata](#message-metadata)

Message metadata allows you to attach custom information to messages at the message level. This is useful for tracking timestamps, model information, token usage, user context, and other message-level data.

## [Overview](#overview)

Message metadata differs from [data parts](streaming-data.html) in that it's attached at the message level rather than being part of the message content. While data parts are ideal for dynamic content that forms part of the message, metadata is perfect for information about the message itself.

## [Getting Started](#getting-started)

Here's a simple example of using message metadata to track timestamps and model information:


First, define your metadata type for type safety:












``` tsx
import  from 'ai';import  from 'zod';
// Define your metadata schemaexport const messageMetadataSchema = z.object();
export type MessageMetadata = z.infer<typeof messageMetadataSchema>;
// Create a typed UIMessageexport type MyUIMessage = UIMessage<MessageMetadata>;
```



Use the `messageMetadata` callback in `toUIMessageStreamResponse` to send metadata at different streaming stages:












``` ts
import  from '@ai-sdk/openai';import  from 'ai';import type  from '@/types';
export async function POST(req: Request) :  = await req.json();
  const result = streamText();
  return result.toUIMessageStreamResponse() => ;      }
      // Send additional metadata when streaming completes      if (part.type === 'finish') ;      }    },  });}
```





To enable type-safe metadata return object in `messageMetadata`, pass in the `originalMessages` parameter typed to your UIMessage type.




Access metadata through the `message.metadata` property:












``` tsx
'use client';
import  from '@ai-sdk/react';import  from 'ai';import type  from '@/types';
export default function Chat()  = useChat<MyUIMessage>(),  });
  return (    <div>      >          <div>                                      </span>            )}          </div>
                    ></div> : null,          )}
                     tokens            </div>          )}        </div>      ))}    </div>  );}
```





For streaming arbitrary data that changes during generation, consider using [data parts](streaming-data.html) instead.



## [Common Use Cases](#common-use-cases)

Message metadata is ideal for:

- **Timestamps**: When messages were created or completed
- **Model Information**: Which AI model was used
- **Token Usage**: Track costs and usage limits
- **User Context**: User IDs, session information
- **Performance Metrics**: Generation time, time to first token
- **Quality Indicators**: Finish reason, confidence scores

## [See Also](#see-also)

- [Chatbot Guide](chatbot.html#message-metadata) - Message metadata in the context of building chatbots
- [UIMessage Reference](../reference/ai-sdk-core/ui-message.html) - Complete UIMessage type reference
















On this page




































Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.