AI SDK 5 is available now.










Menu


































































































































































































































































































































































































































































































































# [`hasToolCall()`](#hastoolcall)

Creates a stop condition that stops when a specific tool is called.

This function is used with `stopWhen` in `generateText` and `streamText` to control when a tool-calling loop should stop based on whether a particular tool has been invoked.



``` ts
import  from '@ai-sdk/openai';import  from 'ai';
const result = await generateText(,  // Stop when the finalAnswer tool is called  stopWhen: hasToolCall('finalAnswer'),});
```


## [Import](#import)



``` geist-overflow-scroll-y
import  from "ai"
```










## [API Signature](#api-signature)

### [Parameters](#parameters)






### toolName:


string




The name of the tool that should trigger the stop condition when called.






### [Returns](#returns)

A `StopCondition` function that returns `true` when the specified tool is called in the current step. The function can be used with the `stopWhen` parameter in `generateText` and `streamText`.

## [Examples](#examples)

### [Basic Usage](#basic-usage)

Stop when a specific tool is called:



``` ts
import  from 'ai';
const result = await generateText(,  stopWhen: hasToolCall('submitAnswer'),});
```


### [Combining with Other Conditions](#combining-with-other-conditions)

You can combine multiple stop conditions in an array:



``` ts
import  from 'ai';
const result = await generateText(,  // Stop when weather tool is called OR finalAnswer is called OR after 5 steps  stopWhen: [    hasToolCall('weather'),    hasToolCall('finalAnswer'),    stepCountIs(5),  ],});
```


### [Agent Pattern](#agent-pattern)

Common pattern for agents that run until they provide a final answer:



``` ts
import  from 'ai';
const result = await generateText(),      execute: async () => answer,    },  },  stopWhen: hasToolCall('finalAnswer'),});
```


## [See also](#see-also)

- [`stepCountIs()`](step-count-is.html)
- [`generateText()`](generate-text.html)
- [`streamText()`](stream-text.html)
















On this page












































Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.