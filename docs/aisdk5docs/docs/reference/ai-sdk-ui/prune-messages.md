AI SDK 5 is available now.










Menu















































































































































































































































































































































































































# [`pruneMessages()`](#prunemessages)

The `pruneMessages` function is used to prune or filter an array of `ModelMessage` objects. This is useful for reducing message context (to save tokens), removing intermediate reasoning, or trimming tool calls and empty messages before sending to an LLM.












``` ts
import  from 'ai';
export async function POST(req: Request)  = await req.json();
  const prunedMessages = pruneMessages();
  const result = streamText();
  return result.toUIMessageStreamResponse();}
```


## [Import](#import)



``` geist-overflow-scroll-y
import  from "ai"
```










## [API Signature](#api-signature)

### [Parameters](#parameters)






### messages:


ModelMessage\[\]




An array of ModelMessage objects to prune.





### reasoning:


'all' \| 'before-last-message' \| 'none'




How to remove reasoning content from assistant messages. Default: "none".





### toolCalls:


'all' \| 'before-last-message' \| 'before-last-\$-messages' \| 'none' \| PruneToolCallsOption\[\]




How to prune tool call/results/approval content. Can specify strategy or a list with tools.





### emptyMessages:


'keep' \| 'remove'




Whether to keep or remove messages whose content is empty after pruning. Default: "remove".






### [Returns](#returns)

An array of [`ModelMessage`](../ai-sdk-core/model-message.html) objects, pruned according to the provided options.






### ModelMessage\[\]:


Array




The pruned list of ModelMessage objects






## [Example Usage](#example-usage)



``` ts
import  from 'ai';
const pruned = pruneMessages();
```


## [Pruning Options](#pruning-options)

- **reasoning:** Removes reasoning parts from assistant messages. Use `'all'` to remove all, `'before-last-message'` to keep reasoning in the last message, or `'none'` to retain all reasoning.
- **toolCalls:** Prune tool-call, tool-result, and tool-approval chunks from assistant/tool messages. Options include:
  - `'all'`: Prune all such content.
  - `'before-last-message'`: Prune except in the last message.
  - `before-last-N-messages`: Prune except in the last N messages.
  - `'none'`: Do not prune.
  - Or provide an array for per-tool fine control.
- **emptyMessages:** Set to `'remove'` (default) to exclude messages that have no content after pruning.

> **Tip**: `pruneMessages` is typically used prior to sending a context window to an LLM to reduce message/token count, especially after a series of tool-calls and approvals.

















On this page

































Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.