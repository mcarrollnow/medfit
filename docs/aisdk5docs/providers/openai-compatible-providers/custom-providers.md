AI SDK 5 is available now.










Menu






















































































































































































































































































































































































































































































# [Writing a Custom Provider](#writing-a-custom-provider)


### [File Structure](#file-structure)



``` bash
packages/example/├── src/│   ├── example-chat-settings.ts       # Chat model types and settings│   ├── example-completion-settings.ts # Completion model types and settings│   ├── example-embedding-settings.ts  # Embedding model types and settings│   ├── example-image-settings.ts      # Image model types and settings│   ├── example-provider.ts            # Main provider implementation│   ├── example-provider.test.ts       # Provider tests│   └── index.ts                       # Public exports├── package.json├── tsconfig.json├── tsup.config.ts                     # Build configuration└── README.md
```


### [Key Files](#key-files)

1.  **example-chat-settings.ts** - Define chat model IDs and settings:



``` ts
export type ExampleChatModelId =  | 'example/chat-model-1'  | 'example/chat-model-2'  | (string & );
```


The completion, embedding, and image settings are implemented similarly to the chat settings.

2.  **example-provider.ts** - Main provider implementation:



``` ts
import  from '@ai-sdk/provider';import  from '@ai-sdk/openai-compatible';import  from '@ai-sdk/provider-utils';// Import your model id and settings here.
export interface ExampleProviderSettings 
export interface ExampleProvider 
export function createExample(  options: ExampleProviderSettings = ,): ExampleProvider )}`,    ...options.headers,  });
  interface CommonModelConfig : ) => string;    headers: () => Record<string, string>;    fetch?: FetchFunction;  }
  const getCommonModelConfig = (modelType: string): CommonModelConfig => (`,    url: () => $`);      if (options.queryParams)       return url.toString();    },    headers: getHeaders,    fetch: options.fetch,  });
  const createChatModel = (    modelId: ExampleChatModelId,    settings: ExampleChatSettings = ,  ) => ;
  const createCompletionModel = (    modelId: ExampleCompletionModelId,    settings: ExampleCompletionSettings = ,  ) =>    new OpenAICompatibleCompletionLanguageModel(      modelId,      settings,      getCommonModelConfig('completion'),    );
  const createTextEmbeddingModel = (    modelId: ExampleEmbeddingModelId,    settings: ExampleEmbeddingSettings = ,  ) =>    new OpenAICompatibleEmbeddingModel(      modelId,      settings,      getCommonModelConfig('embedding'),    );
  const createImageModel = (    modelId: ExampleImageModelId,    settings: ExampleImageSettings = ,  ) =>    new OpenAICompatibleImageModel(      modelId,      settings,      getCommonModelConfig('image'),    );
  const provider = (    modelId: ExampleChatModelId,    settings?: ExampleChatSettings,  ) => createChatModel(modelId, settings);
  provider.completionModel = createCompletionModel;  provider.chatModel = createChatModel;  provider.textEmbeddingModel = createTextEmbeddingModel;  provider.imageModel = createImageModel;
  return provider;}
// Export default instanceexport const example = createExample();
```


3.  **index.ts** - Public exports:



``` ts
export  from './example-provider';export type  from './example-provider';
```


4.  **package.json** - Package configuration:



``` js
,  // ...additional scripts and module build configuration}
```


### [Usage](#usage)

Once published, users can use your provider like this:



``` ts
import  from '@company-name/example';import  from 'ai';
const  = await generateText();
```


This structure provides a clean, type-safe implementation that leverages the OpenAI Compatible package while maintaining consistency with the usage of other AI SDK providers.

### [Internal API](#internal-api)

As you work on your provider you may need to use some of the internal API of the OpenAI Compatible package. You can import these from the `@ai-sdk/openai-compatible/internal` package, for example:



``` ts
import  from '@ai-sdk/openai-compatible/internal';
```


















On this page

























Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







© 2025 Vercel, Inc.