AI SDK 5 is available now.










Menu





























































































































































































































































































































































































































































# [Restore Messages from Database](#restore-messages-from-database)

When building AI applications, you might want to restore previous conversations from a database to allow users to continue their conversations or review past interactions. The AI SDK provides mechanisms to restore conversation state through `initialAIState` and `onGetUIState`.

## [Client](#client)












``` tsx
import  from './actions';import  from './ai';
export default function RootLayout(: Readonly<>)  initialUIState=>                  </AI>      </body>    </html>  );}
```













``` tsx
'use client';
import  from 'react';import  from './actions';import  from '@ai-sdk/rsc';import  from 'ai';
export default function Home()  = useActions();
  return (    <div>      <div className="conversation-history">         className=`}>            :           </div>        ))}      </div>
      <div className="input-area">        <input          type="text"          value=          onChange=          placeholder="Type your message..."        />        <button          onClick=,            ]);
            // Get AI response            const message = await continueConversation(input);
            // Add AI response to UI            setConversation((currentConversation: ClientMessage[]) => [              ...currentConversation,              message,            ]);
            setInput('');          }}        >          Send        </button>      </div>    </div>  );}
```


## [Server](#server)

The server-side implementation handles the restoration of messages and their transformation into the appropriate format for display.












``` tsx
import  from '@ai-sdk/rsc';import  from './actions';import  from '@ai-studio/components/stock';import  from 'ai';
export const AI = createAI<ServerMessage[], ClientMessage[]>(,  onGetUIState: async () => ) => ( /> : content,    }));  },});
```













``` tsx
'use server';
import  from '@ai-sdk/rsc';
export interface ServerMessage 
export interface ClientMessage 
// Function to get saved messages from databaseexport async function getSavedMessages(): Promise<ServerMessage[]> 
```

















On this page



















Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.