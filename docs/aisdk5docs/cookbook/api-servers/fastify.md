AI SDK 5 is available now.










Menu


























































































































































































































































































































































































# [Fastify](#fastify)


## [Examples](#examples)

The examples start a simple HTTP server that listens on port 8080. You can e.g. test it using `curl`:



``` bash
curl -X POST http://localhost:8080
```





The examples use the OpenAI `gpt-4o` model. Ensure that the OpenAI API key is set in the `OPENAI_API_KEY` environment variable.





You can use the `toDataStream` method to get a data stream from the result and then pipe it to the response.












``` ts
import  from '@ai-sdk/openai';import  from 'ai';import Fastify from 'fastify';
const fastify = Fastify();
fastify.post('/', async function (request, reply) );
  // Mark the response as a v1 data stream:  reply.header('X-Vercel-AI-Data-Stream', 'v1');  reply.header('Content-Type', 'text/plain; charset=utf-8');
  return reply.send(result.toDataStream());});
fastify.listen();
```


### [Sending Custom Data](#sending-custom-data)

`createDataStream` can be used to send custom data to the client.












``` ts
import  from '@ai-sdk/openai';import  from 'ai';import Fastify from 'fastify';
const fastify = Fastify();
fastify.post('/stream-data', async function (request, reply) );
      result.mergeIntoDataStream(dataStreamWriter);    },    onError: error => ,  });
  // Mark the response as a v1 data stream:  reply.header('X-Vercel-AI-Data-Stream', 'v1');  reply.header('Content-Type', 'text/plain; charset=utf-8');
  return reply.send(dataStream);});
fastify.listen();
```


### [Text Stream](#text-stream)

You can use the `textStream` property to get a text stream from the result and then pipe it to the response.












``` ts
import  from '@ai-sdk/openai';import  from 'ai';import Fastify from 'fastify';
const fastify = Fastify();
fastify.post('/', async function (request, reply) );
  reply.header('Content-Type', 'text/plain; charset=utf-8');
  return reply.send(result.textStream);});
fastify.listen();
```


## [Troubleshooting](#troubleshooting)

- Streaming not working when [proxied](../../docs/troubleshooting/streaming-not-working-when-proxied.html)
















On this page






























Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.