AI SDK 5 is available now.










Menu


























































































































































































































































































































































































# [Generate Image with Chat Prompt](#generate-image-with-chat-prompt)

When building a chatbot, you may want to allow the user to generate an image. This can be done by creating a tool that generates an image using the [`experimental_generateImage`](../../docs/reference/ai-sdk-core/generate-image.html#generateimage) function from the AI SDK.

## [Server](#server)

Let's create an endpoint at `/api/chat` that generates the assistant's response based on the conversation history. You will also define a tool called `generateImage` that will generate an image based on the assistant's response.












``` typescript
import  from '@ai-sdk/openai';import  from 'ai';import z from 'zod';
export const generateImage = tool(),  execute: async () =>  = await experimental_generateImage();    // in production, save this image to blob storage and return a URL    return ;  },});
```













``` typescript
import  from '@ai-sdk/openai';import  from 'ai';
import  from '@/tools/generate-image';
const tools = ;
export type ChatTools = InferUITools<typeof tools>;
export async function POST(request: Request) :  = await request.json();
  const result = streamText();
  return result.toUIMessageStreamResponse();}
```





In production, you should save the generated image to a blob storage and return a URL instead of the base64 image data. If you don't, the base64 image data will be sent to the model which may cause the generation to fail.



## [Client](#client)

Let's create a simple chat interface with `useChat`. You will call the `/api/chat` endpoint to generate the assistant's response. If the assistant's response contains a `generateImage` tool invocation, you will display the tool result (the image in base64 format and the prompt) using the Next `Image` component.












``` tsx
'use client';
import  from '@ai-sdk/react';import  from 'ai';import Image from 'next/image';import  from 'react';import type  from './api/chat/route';
type ChatMessage = UIMessage<never, never, ChatTools>;
export default function Chat()  = useChat<ChatMessage>(),  });
  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => ;
  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => ],    });
    setInput('');  };
  return (    <div className="flex flex-col w-full max-w-md py-24 mx-auto stretch">      <div className="space-y-4">         className="whitespace-pre-wrap">            <div key=>              <div className="font-bold"></div>               = part;
                if (type === 'text') -part-$`}>                                          </div>                  );                }
                if (type === 'tool-generateImage')  = part;
                  if (state === 'input-available') -part-$`}>                        Generating image...                      </div>                    );                  }
                  if (state === 'output-available')  = part;
                    return (                      <Image                        key=                        src=`}                        alt=                        height=                        width=                      />                    );                  }                }              })}            </div>          </div>        ))}      </div>
      <form onSubmit=>        <input          className="fixed bottom-0 w-full max-w-md p-2 mb-8 border border-gray-300 rounded shadow-xl"          value=          placeholder="Say something..."          onChange=        />      </form>    </div>  );}
```

















On this page



















Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.