AI SDK 5 is available now.










Menu


























































































































































































































































































































































































# [MCP Tools](#mcp-tools)

The AI SDK supports Model Context Protocol (MCP) tools by offering a lightweight client that exposes a `tools` method for retrieving tools from a MCP server. After use, the client should always be closed to release resources.

## [Server](#server)

Let's create a route handler for `/api/completion` that will generate text based on the input prompt and MCP tools that can be called at any time during a generation. The route will call the `streamText` function from the `ai` module, which will then generate text based on the input prompt and stream it to the client.

To use the `StreamableHTTPClientTransport`, you will need to install the official Typescript SDK for Model Context Protocol:



``` geist-overflow-scroll-y
pnpm install @modelcontextprotocol/sdk
```





















``` ts
import  from 'ai';import  from 'ai/mcp-stdio';import  from '@ai-sdk/openai';import  from '@modelcontextprotocol/sdk/client/stdio';import  from '@modelcontextprotocol/sdk/client/sse';import  from '@modelcontextprotocol/sdk/client/streamableHttp';
export async function POST(req: Request) :  = await req.json();
  try );
    const stdioClient = await experimental_createMCPClient();
    // You can also connect to StreamableHTTP MCP servers    const httpTransport = new StreamableHTTPClientTransport(      new URL('http://localhost:3000/mcp'),    );    const httpClient = await experimental_createMCPClient();
    // Alternatively, you can connect to a Server-Sent Events (SSE) MCP server:    const sseTransport = new SSEClientTransport(      new URL('http://localhost:3000/sse'),    );    const sseClient = await experimental_createMCPClient();
    const toolSetOne = await stdioClient.tools();    const toolSetTwo = await httpClient.tools();    const toolSetThree = await sseClient.tools();    const tools = ;
    const response = await streamText(,      // Closing clients onError is optional      // - Closing: Immediately frees resources, prevents hanging connections      // - Not closing: Keeps connection open for retries      onError: async error => ,    });
    return response.toDataStreamResponse();  } catch (error) );  }}
```


## [Client](#client)

Let's create a simple React component that imports the `useCompletion` hook from the `@ai-sdk/react` module. The `useCompletion` hook will call the `/api/completion` endpoint when a button is clicked. The endpoint will generate text based on the input prompt and stream it to the client.












``` tsx
'use client';
import  from '@ai-sdk/react';
export default function Page()  = useCompletion();
  return (    <div>      <div        onClick=}      >        Schedule a call      </div>
          </div>  );}
```

















On this page



















Vercel delivers the infrastructure and developer experience you need to ship reliable AI-powered applications at scale.

Trusted by industry leaders:















#### Resources




#### More




#### About Vercel




#### Legal







Â© 2025 Vercel, Inc.